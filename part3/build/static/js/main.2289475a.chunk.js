(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){e.exports=t(43)},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),u=t(16),c=t.n(u),o=t(6),i=t(3),s=function(e){var n=e.value,t=e.inputHandler;return a.a.createElement(a.a.Fragment,null,"Filter phonebook: ",a.a.createElement("input",{value:n,onChange:function(e){return t(e.target.value)}}))},l=function(e){var n=e.name,t=e.nameChangeHandler,r=e.number,u=e.numberChangeHandler,c=e.submitHandler;return a.a.createElement("form",{onSubmit:c},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:n,onChange:t})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:r,onChange:u})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.persons,t=e.onDelete;return a.a.createElement("ul",null,n.map((function(e){return a.a.createElement("li",{key:e.id},e.name," ",e.number,a.a.createElement("button",{onClick:function(){t(e)}},"Delete"))})))},m=t(2),p=t.n(m),d=t(4),b=t(17),h=t(18),v=t(5),E=t.n(v),g=new(function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,[{key:"getPersons",value:function(){var e=Object(d.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/persons");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"postPerson",value:function(){var e=Object(d.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/persons",n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},{key:"putPerson",value:function(){var e=Object(d.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.put("/api/persons/".concat(n.id),n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},{key:"deletePerson",value:function(){var e=Object(d.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.delete("/api/persons/".concat(n.id)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}]),e}());var w=function(e){var n=e.config,t=n.type,r=n.message;return r?a.a.createElement("p",{className:"notification ".concat(t)},r):null},y=(t(42),function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],c=Object(r.useState)(""),m=Object(i.a)(c,2),p=m[0],d=m[1],b=Object(r.useState)(""),h=Object(i.a)(b,2),v=h[0],E=h[1],y=Object(r.useState)(""),j=Object(i.a)(y,2),O=j[0],k=j[1],C=Object(r.useState)({type:"success",message:""}),P=Object(i.a)(C,2),x=P[0],H=P[1];function S(e,n){H({type:e,message:n}),setTimeout((function(e){return H({type:"success",message:""})}),3e3)}return Object(r.useEffect)((function(){g.getPersons().then((function(e){return u(e)}))}),[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(w,{config:x}),a.a.createElement(s,{value:O,inputHandler:k}),a.a.createElement("h2",null,"Add a number"),a.a.createElement(l,{name:p,number:v,nameChangeHandler:function(e){d(e.target.value)},numberChangeHandler:function(e){E(e.target.value)},submitHandler:function(e){if(e.preventDefault(),a=p,t.some((function(e){return e.name===a}))){if(window.confirm("".concat(p," is already added to phonebook. Should the old number be replaced with  the new one?"))){var n=t.find((function(e){return e.name===p})),r=Object(o.a)(Object(o.a)({},n),{},{number:v});g.putPerson(r).then((function(e){return u(t.filter((function(e){return e.id!==n.id})).concat(e))})).then((function(e){return S("success","Updated ".concat(r.name,"'s contact"))})).catch((function(e){return S("error",e)}))}}else{var a,c={name:p,number:v,id:window.crypto.getRandomValues(new Uint8Array(1))[0]};g.postPerson(c).then((function(e){return u(t.concat(e))})).then((function(e){return S("success","Added ".concat(c.name,"'s contact"))})).catch((function(e){return S("error",e)})),d(""),E("")}}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(f,{persons:t.filter((function(e){return n=e.name,t=O,n.toLowerCase().includes(t);var n,t})),onDelete:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"'s contact"))&&g.deletePerson(e).then((function(n){return u(t.filter((function(n){return n.id!==e.id})))})).then((function(n){return S("success","Deleted ".concat(e.name,"'s contact"))})).catch((function(n){u(t.filter((function(n){return n.id!==e.id}))),S("error","".concat(e.name,"'s contact has already been deleted"))}))}}))});c.a.render(a.a.createElement(y,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.2289475a.chunk.js.map